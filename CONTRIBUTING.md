# CONTRIBUTING

Dziękujemy za zainteresowanie wniesieniem wkładu do projektu Kinkony-KC868-A16. Zanim wyślesz zmiany, przeczytaj poniższe zasady — projekt stosuje politykę "nie nadpisujemy istniejących plików"; każda poprawka musi być dodana jako nowa wersja pliku.

1. Zasada wersjonowania plików
- Nie modyfikuj ani nie nadpisuj istniejących plików w repozytorium (zwłaszcza plików .ino, me300_regs.h, rejestry CSV, itp.).
- Aby wprowadzić poprawkę lub zmianę, utwórz nowy plik w katalogu głównym lub w odpowiednim podkatalogu, używając konwencji nazewnictwa opisanej w pliku VERSIONING.md (np. master_kc868_a16_multi_sid_v22.ino albo master_kc868_a16_multi_sid_v21a_fixed_v22.ino).
- Nowa wersja pliku powinna zawierać w nazwie numer wersji (MAJOR.MINOR.PATCH) lub czytelny sufiks daty/czasu, aby jednoznacznie odróżnić wersje.

2. Branching i PR
- Pracuj na oddzielnej gałęzi feature/fix/topic (np. feature/wifi-sta-fallback) — NIE pracuj bezpośrednio na gałęzi main.
- Zrób pull request (PR) do gałęzi main z opisem zmian i checklistą (patrz sekcja "Checklist PR").
- PR musi zawierać testy/krótką instrukcję testowania i listę zmienionych/nowych plików.

3. Review i mergowanie
- Wymagane jest co najmniej 1 review od innego kontrybutora (lub właściciela) przed scaleniem.
- Nie scalaj PR, jeśli w treści PR znajdują się jawne dane wrażliwe (hasła, klucze, itp.). Zamiast tego zastąp je placeholderami i opisz sposób konfiguracji w runtime (Preferences, plik konfiguracyjny niewersjonowany).

4. Commit messages
- Używaj jasnych komunikatów w stylu: "Add: <krótki opis>" / "Fix: <krótki opis>" / "Docs: <krótki opis>".
- Jeżeli dodajesz nową wersję pliku, w komunikacie podaj: "New version: <nazwa pliku> -> <nowa nazwa pliku>".

5. Pliki konfiguracyjne i sekrety
- Nie commituj haseł, kluczy API, certyfikatów ani innych sekretów.
- Używaj Preferences (ESP) lub wczytywania z pliku konfiguracyjnego, który jest na .gitignore (np. config.local.json).
- Jeżeli przypadkowo skomitowano sekret, skontaktuj się z właścicielem repo i przeprowadź rotację sekretów; rozważ użycie git filter-repo / BFG do oczyszczenia historii.

6. Regeneracja plików autogenerated
- Jeżeli zmieniasz rejestry (CSV), dodaj nowy plik CSV oraz wygenerowany z niego header (np. me300_regs_v2.h) zamiast nadpisywać istniejącego me300_regs.h.
- Dodaj w PR informację jak wygenerowano header (narzędzie/skrypt + wersja skryptu) i umieść oryginalny CSV w repo (jeśli nie zawiera sekretów).

7. Testy i CI
- PR powinien uruchamiać testy (jeżeli są dostępne) lub zawierać instrukcję manualnego testowania.
- Zalecane: dodać workflow GitHub Actions, który sprawdza kompilację szkieletu (np. verify build dla ESP32/ESP8266) i sprawdza, że nie nadpisujemy istniejących plików.

8. Checklist PR (do wklejenia w opis PR)
- [ ] Opis zmian dodany
- [ ] Zmiany umieszczone w nowych plikach (nie nadpisują istniejących)
- [ ] Instrukcja testowania dołączona
- [ ] Brak jawnych sekretów
- [ ] Zaktualizowany CHANGELOG (jeśli dotyczy)

9. Kontakt i wsparcie
- W razie wątpliwości napisz issue opisujące proponowaną zmianę przed przygotowaniem PR.
